/*! FractalBitShadows v0.0.3 - 2013-10-06 04:10:37 
Vince Allen |Brooklyn, NY | vince@vinceallen.com | @vinceallenvince | License: MIT */
!function(a,b){function c(a){var b=a||{};if(!BitShadowMachine)throw new Error("Chaos requires BitShadowMachine.");this.world=b.world||c._createDefaultWorld(),this.resolution="undefined"==typeof b.resolution?2:b.resolution,this.borderRadius="undefined"==typeof b.borderRadius?100:b.borderRadius,this.colorMode=b.colorMode||"rgba",this.backgroundWidth="undefined"==typeof b.backgroundWidth?960:b.backgroundWidth,this.backgroundHeight="undefined"==typeof b.backgroundHeight?540:b.backgroundHeight,this.backgroundColor=b.backgroundColor||[0,0,0],this.backgroundHue="undefined"==typeof b.backgroundHue?0:b.backgroundHue,this.backgroundSaturation="undefined"==typeof b.backgroundSaturation?0:b.backgroundSaturation,this.backgroundLightness="undefined"==typeof b.backgroundLightness?0:b.backgroundLightness,this.palette=b.palette||c._createDefaultPalette(),this.maxScale="undefined"==typeof b.maxScale?40:b.maxScale,this.depth="undefined"==typeof b.depth?9:b.depth,this.maxShapes="undefined"==typeof b.maxShapes?3:b.maxShapes,this.maxOpacity="undefined"==typeof b.maxOpacity?.5:b.maxOpacity,this.hue="undefined"==typeof b.hue?200:b.hue,this.saturation="undefined"==typeof b.saturation?.5:b.saturation,this.lightness="undefined"==typeof b.lightness?.5:b.lightness,this.blur="undefined"==typeof b.blur?0:b.blur,this.initOffsetAngle="undefined"==typeof b.initOffsetAngle?0:b.initOffsetAngle,this.initOpacity="undefined"==typeof b.initOpacity?0:b.initOpacity,this.getDist=b.getDist||function(a){return 1.5*a.scale},this.angleOffset="undefined"==typeof b.angleOffset?0:b.angleOffset,this.getAngles=b.getAngles||function(){return[this.angleOffset,this.angleOffset+2*Math.PI/3,this.angleOffset+4*Math.PI/3]},this.maxDepth=b.maxDepth||10;var d=this;c.addEvent(document,"keyup",function(a){switch(a.keyCode){case 38:d.resolution++;break;case 40:d.resolution-1>0&&d.resolution--;break;case 37:d.depth-1>0&&d.depth--;break;case 39:d.depth+1<d.maxDepth&&d.depth++}BitShadowMachine.System._destroySystem(),d.render()})}function d(a){var b=a||{};b.name="Point",BitShadowMachine.Item.call(this,b)}b.FractalBitShadows=a,c._createDefaultPalette=function(){var a=new BitShadowMachine.ColorPalette;return a.addColor({min:12,max:24,startColor:[196,213,86],endColor:[166,183,56]}).addColor({min:12,max:24,startColor:[56,139,126],endColor:[26,109,96]}).addColor({min:12,max:24,startColor:[104,233,212],endColor:[74,203,182]}).addColor({min:12,max:24,startColor:[233,158,104],endColor:[203,128,74]}).addColor({min:12,max:24,startColor:[191,75,49],endColor:[171,55,19]}),a},c._createDefaultWorld=function(){var a=document.createElement("div");return a.id="worldA",document.body.appendChild(a),a},c.prototype.render=function(){var a=this,b=b||{boxshadow:!0,rgba:!0,hsla:!0},e=new BitShadowMachine.World(this.world,{width:this.backgroundWidth,height:this.backgroundHeight,resolution:this.resolution,borderRadius:this.borderRadius,backgroundColor:this.backgroundColor,colorMode:this.colorMode,hue:this.backgroundHue,saturation:this.backgroundSaturation,lightness:this.backgroundLightness,gravity:new BitShadowMachine.Vector,noMenu:!0});BitShadowMachine.Classes={Point:d},BitShadowMachine.System.totalFrames=1,BitShadowMachine.System.init(function(){var b=this.add("Point",{scale:a.maxScale,offsetAngle:a.initOffsetAngle,opacity:a.initOpacity,blur:a.blur,hue:a.hue,saturation:a.saturation,lightness:a.lightness,color:a.palette.getColor()});c._iterate.call(a,this,b,a.depth-1)},e,b)},c._iterate=function(a,b,d){for(var e=BitShadowMachine.Utils,f=.6*b.scale,g=this.getDist.call(this,b),h=this.getAngles.call(this),i=0;i<this.maxShapes;i++){var j=new BitShadowMachine.Vector(b.location.x,b.location.y),k=new BitShadowMachine.Vector(1,1);k.normalize();var l=b.offsetAngle+h[i];k.rotate(l),k.mult(g),j.add(k);var m=a.add("Point",{location:j,scale:f,offsetAngle:l,opacity:e.map(f,0,this.maxScale,this.maxOpacity,0),blur:b.blur,hue:b.hue,saturation:b.saturation,lightness:b.lightness,color:this.palette.getColor()});d>0&&c._iterate.call(this,a,m,d-1)}},c.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},BitShadowMachine.Utils.extend(d,BitShadowMachine.Item),d.prototype.init=function(a){this.width=a.width||20,this.height=a.height||20,this.color=a.color||[100,100,100],this.location=a.location||new BitShadowMachine.Vector(this.world.width/2,this.world.height/2)},d.prototype.step=function(){},a.Chaos=c,a.Point=d}({},function(){return this}());